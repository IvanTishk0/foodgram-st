# Настройка CI/CD для Foodgram

Для автоматической сборки и публикации Docker-образов в GitHub Actions, необходимо добавить следующие секреты в настройки репозитория:

1. Перейдите в настройки вашего GitHub репозитория
2. Выберите "Secrets and variables" -> "Actions"
3. Нажмите "New repository secret"

## Обязательные секреты

Добавьте следующие секреты:

| Секрет | Описание |
|--------|----------|
| `DOCKER_USERNAME` | Ваше имя пользователя Docker Hub |
| `DOCKER_PASSWORD` | Ваш пароль или токен Docker Hub |

## Секреты для автоматического деплоя

Если вы хотите настроить автоматический деплой на сервер, добавьте также:

| Секрет | Описание |
|--------|----------|
| `HOST` | IP-адрес вашего сервера |
| `USERNAME` | Имя пользователя SSH для доступа к серверу |
| `SSH_KEY` | Приватный SSH-ключ для доступа к серверу |
| `POSTGRES_USER` | Имя пользователя базы данных PostgreSQL |
| `POSTGRES_PASSWORD` | Пароль базы данных PostgreSQL |
| `POSTGRES_DB` | Имя базы данных PostgreSQL |
| `SECRET_KEY` | Секретный ключ для Django |

## Процесс CI/CD

1. При каждом push в ветку main или master:
   - Запускаются проверки кода бэкенда и фронтенда
   - Собираются Docker-образы
   - Образы публикуются на Docker Hub (с тегами latest и временной меткой)
   - Обновленные конфигурационные файлы копируются на сервер
   - Запускается развертывание на сервер

2. Pull Request'ы:
   - Запускаются только проверки кода без публикации и деплоя 